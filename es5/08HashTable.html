<!DOCTYPE html>
<html>
<head>
	<title>08HashTable</title>
</head>
<body>

<script type="text/javascript">

function HashTable() {
	this.table = new Array(137)
	this.simpleHash = simpleHash
	this.betterHash = betterHash
	this.showDistro = showDistro
	this.buildChains = buildChains
	this.put = put
	this.get = get
}

function put(data) {
	// var pos = this.simpleHash(data)
	var pos = this.betterHash(data)
	this.table[pos] = data
}

function get(key) {
	return this.table[this.betterHash(key)]
}

function simpleHash(data) {
	var total = 0;
	for (var i = 0; i < data.length; ++i) {
		total += data.charCodeAt(i)
	}
	return total % this.table.length
}

function showDistro() {
	for (var i = 0; i < this.table.length; ++i) {
		if (this.table[i][0]) {
			console.log(i + ':' + this.table[i])
		}
	}
}

function betterHash(string) {
	const N = 37
	var total = 0
	for (var i = 0; i < string.length; ++i) {
		total += N*total + string.charCodeAt(i)
	}
	total = total % this.table.length
	if(total<0){
		total += this.table.length - 1
	}
	return parseInt(total)
}


/**
 * handle collision
 */

// build chain
function buildChains() {
	for (var i = 0; i < this.table.length; ++i) {
		this.table[i] = []
	}
}


var someNames = ["David", "Jennifer", "Donnie", "Raymond",
                      "Cynthia", "Mike", "Clayton", "Danny", "Jonathan"];

var hTable = new HashTable();

hTable.buildChains()

for (var i = 0; i < someNames.length; ++i) {
	hTable.put(someNames[i]);
}

hTable.showDistro();


// linear detect
/*method put extend Put{
	constractor(){
		invoke,
		evoke,
		super
	}
}*/
</script>




</body>
</html>